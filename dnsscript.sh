#!/bin/bash
for i in $(head -1 hosts); do nmap -A -Pn $i | awk '/Domain\ name:/{print $4}' > domain; done
for i in $(cat hosts); do for j in $(head -1 domain); do host -l $j $i | awk '/Name:/{print $2}' >> dns-servers; done; done
for i in $(cat dns-servers); do for j in $(head -1 domain); do host -l $j $i | awk '/has\ address/{print $4 " " $1}' >> raw-dns-results; done; done
cat raw-dns-results | awk '{printf ("%-15s %-99s\n", $1, $2)}' >> dns-results
rm -r raw-dns-results 	  				 	 	 	    		  	   		  		
